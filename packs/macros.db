{"_id":"0pFj61UrbQOJRvOf","name":"Roll die","type":"script","author":"4OxU3E57BM9ttwDI","img":"systems/arm5e/assets/MacroDice.png","scope":"global","command":"/**\n * Roll as stress die\n * \n */\n\nconst tokens = canvas.tokens.controlled;\n\nif (tokens.length == 1 ){\n  rollStressDie(tokens[0]);\n} else {\n  printMessage(\"No Tokens were selected\");\n}\n\nasync function rollStressDie(token){\n  let actor = token.actor;\n  \n  let dataset = {\n    roll: \"option\",\n    usefatigue :\"false\"\n  };\n  await actor.sheet._onRoll(dataset);\n  \n}\n\n\t\nfunction printMessage(message){\n  let chatData = {\n    user : game.user._id,\n    content : message,\n    blind: true,\n    whisper : game.users.filter(u => u.isGM).map(u => u.id)\n  };\n  ChatMessage.create(chatData,{});\t\n}","folder":null,"sort":0,"permission":{"default":0,"4OxU3E57BM9ttwDI":3},"flags":{"scene-packer":{"hash":"870ec95973b9cbaddfd315410773744d228b52b7","sourceId":"Macro.DsY5ID5Fmn4JnzZg"},"core":{"sourceId":"Macro.DsY5ID5Fmn4JnzZg"}}}
